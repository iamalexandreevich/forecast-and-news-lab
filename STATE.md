# STATE.md - Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

_ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÐµÐµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ: 2025-09-29_

## ðŸ“‹ ÐžÐ³Ð»Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ
1. [ÐžÐ±Ð·Ð¾Ñ€ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°](#Ð¾Ð±Ð·Ð¾Ñ€-Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°)
2. [ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹](#Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°-ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹)
3. [Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ñ„Ð°Ð¹Ð»Ð¾Ð²](#ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°-Ñ„Ð°Ð¹Ð»Ð¾Ð²)
4. [ÐœÐ¾Ð´ÑƒÐ»ÑŒÐ½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°](#Ð¼Ð¾Ð´ÑƒÐ»ÑŒÐ½Ð°Ñ-ÑÐ¸ÑÑ‚ÐµÐ¼Ð°)
5. [ÐŸÐ¾Ñ‚Ð¾Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ](#Ð¿Ð¾Ñ‚Ð¾Ðº-Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ)
6. [ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°](#ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ-Ð¸-Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°)
7. [API Ð¸ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸](#api-Ð¸-Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸)
8. [Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÑ‚ÐµÐº](#Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹-ÑÑ‚ÐµÐº)
9. [Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð¿Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÑƒ](#Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸-Ð¿Ð¾-Ð·Ð°Ð¿ÑƒÑÐºÑƒ)
10. [Ð˜Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ](#Ð¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ðµ-Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ)

---

## ðŸŽ¯ ÐžÐ±Ð·Ð¾Ñ€ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

**ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ**: Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð°ÐºÑ†Ð¸Ð¹ Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¾Ð¼ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ð¹
**Ð¢Ð¸Ð¿**: Streamlit Ð²ÐµÐ±-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
**Ð¦ÐµÐ»ÑŒ**: ÐšÐ¾Ð¼Ð¿Ð»ÐµÐºÑÐ½Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð· Ð¸ Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð°ÐºÑ†Ð¸Ð¹ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹ Ð¸Ð· Telegram Ð¸ LLM-Ð°Ð½Ð°Ð»Ð¸Ð·Ð° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ð¹

### ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸:
- ðŸ“Š ÐÐ½Ð°Ð»Ð¸Ð· Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð°ÐºÑ†Ð¸Ð¹ Ñ Yahoo Finance Ð¸ MOEX
- ðŸ“± ÐŸÐ°Ñ€ÑÐ¸Ð½Ð³ Telegram ÐºÐ°Ð½Ð°Ð»Ð¾Ð² Ð´Ð»Ñ ÑÐ±Ð¾Ñ€Ð° Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ñ… Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹
- ðŸ¤– LLM-Ð°Ð½Ð°Ð»Ð¸Ð· Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ð¹ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹ Ñ‡ÐµÑ€ÐµÐ· OpenAI API
- ðŸ“ˆ ML-Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ RandomForest
- ðŸ“‰ ÐšÐ¾Ñ€Ñ€ÐµÐ»ÑÑ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð· Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹ Ð¸ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð°ÐºÑ†Ð¸Ð¹
- ðŸŽ¨ Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°Ñ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Plotly

---

## ðŸ—ï¸ ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹

### ÐœÐ¾Ð´ÑƒÐ»ÑŒÐ½Ð°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    app.py       â”‚ â† Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° Streamlit
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚ modules â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ stock_analyzer.py    â†’ Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð· Ð±Ð¸Ñ€Ð¶ÐµÐ²Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
         â”œâ”€â”€ telegram_parser.py   â†’ ÐŸÐ°Ñ€ÑÐ¸Ð½Ð³ Telegram ÐºÐ°Ð½Ð°Ð»Ð¾Ð²
         â”œâ”€â”€ llm_analyzer.py      â†’ LLM Ð°Ð½Ð°Ð»Ð¸Ð· Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ð¹
         â”œâ”€â”€ forecaster.py        â†’ ML Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
         â””â”€â”€ visualizer.py        â†’ Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…
```

### ÐŸÐ¾Ñ‚Ð¾Ðº Ð´Ð°Ð½Ð½Ñ‹Ñ…
```
[Yahoo/MOEX API] â†’ [StockAnalyzer] â†’ [Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ]
                                           â†“
[Telegram API] â†’ [TelegramParser] â†’ [ÐÐ¾Ð²Ð¾ÑÑ‚Ð¸] â†’ [LLMAnalyzer] â†’ [ÐÐ°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ]
                                           â†“
                                    [Forecaster] â†’ [ÐŸÑ€Ð¾Ð³Ð½Ð¾Ð·]
                                           â†“
                                    [Visualizer] â†’ [UI]
```

---

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ñ„Ð°Ð¹Ð»Ð¾Ð²

```
Ð˜Ð˜ Ð­ÐšÐ¡ÐŸÐ•Ð Ð¢ÐÐ«Ð• Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ«/
â”‚
â”œâ”€â”€ app.py                    # Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Streamlit
â”œâ”€â”€ STATE.md                  # Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» - Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
â”œâ”€â”€ replit.md                 # ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð´Ð»Ñ Replit
â”œâ”€â”€ pyproject.toml            # ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
â”œâ”€â”€ uv.lock                   # Lock-Ñ„Ð°Ð¹Ð» Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
â”‚
â”œâ”€â”€ config/                   # ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²
â”‚   â”œâ”€â”€ channels.yml          # Ð¡Ð¿Ð¸ÑÐ¾Ðº Telegram-ÐºÐ°Ð½Ð°Ð»Ð¾Ð²
â”‚   â””â”€â”€ keywords.yml          # ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÑÐ»Ð¾Ð²Ð° Ð¸ Ñ„Ñ€Ð°Ð·Ñ‹
â”‚
â”œâ”€â”€ modules/                  # ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¼Ð¾Ð´ÑƒÐ»Ð¸ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
â”‚   â”œâ”€â”€ __init__.py          # Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ð°ÐºÐµÑ‚Ð°
â”‚   â”œâ”€â”€ stock_analyzer.py    # ÐÐ½Ð°Ð»Ð¸Ð· Ð±Ð¸Ñ€Ð¶ÐµÐ²Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
â”‚   â”œâ”€â”€ schemas.py           # Pydantic-ÑÑ…ÐµÐ¼Ñ‹ Ð´Ð»Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¾Ð² Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹
â”‚   â”œâ”€â”€ storage.py           # Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Parquet-Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰ÐµÐ¼
â”‚   â”œâ”€â”€ telegram_parser.py   # ÐÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ð²ÐµÐ¹ÐµÑ€ Telegram
â”‚   â”œâ”€â”€ llm_analyzer.py      # LLM Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€
â”‚   â”œâ”€â”€ forecaster.py        # ÐŸÑ€Ð¾Ð³Ð½Ð¾Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
â”‚   â””â”€â”€ visualizer.py        # Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ
â”‚
â”œâ”€â”€ tests/                   # ÐœÐ¾Ð´ÑƒÐ»ÑŒÐ½Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹
â”‚   â””â”€â”€ test_telegram_parser.py
â”‚
â”œâ”€â”€ .venv/                   # Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Python
â””â”€â”€ __pycache__/             # Ð¡ÐºÐ¾Ð¼Ð¿Ð¸Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Python Ñ„Ð°Ð¹Ð»Ñ‹
```

---

## ðŸ”§ ÐœÐ¾Ð´ÑƒÐ»ÑŒÐ½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°

### 1. StockAnalyzer (`modules/stock_analyzer.py`)
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð· Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð°ÐºÑ†Ð¸Ð¹

#### ÐšÐ»Ð°ÑÑ: `StockAnalyzer`

**ÐœÐµÑ‚Ð¾Ð´Ñ‹**:
- `__init__()`: Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ ÑÐ»Ð¾Ð²Ð°Ñ€ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ñ…
- `fetch_stock_data(symbols, period="2y")`: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð´Ð»Ñ ÑÐ¿Ð¸ÑÐºÐ° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
  - Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ñ‹Ñ‚Ð°ÐµÑ‚ÑÑ Yahoo Finance
  - ÐŸÑ€Ð¸ Ð½ÐµÑƒÐ´Ð°Ñ‡Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ MOEX ISS API Ð´Ð»Ñ Ñ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¸Ñ… Ð°ÐºÑ†Ð¸Ð¹
- `_fetch_from_yahoo(symbol, period)`: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ‡ÐµÑ€ÐµÐ· yfinance
- `_fetch_from_moex(symbol, period)`: Ð ÐµÐ·ÐµÑ€Ð²Ð½Ð°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ MOEX
  - ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸ÑŽ (Ð´Ð¾ 50 ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†)
  - ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ñ‹Ð¹ Ñ Yahoo
- `_normalize_moex_symbol(symbol)`: ÐÐ¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð² Ð´Ð»Ñ MOEX
- `calculate_price_changes(symbol)`: Ð Ð°ÑÑ‡ÐµÑ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ñ†ÐµÐ½Ñ‹ (1Ð´, 7Ð´, 30Ð´)
- `find_top_movements(symbol, top_n=20)`: ÐŸÐ¾Ð¸ÑÐº Ñ‚Ð¾Ð¿ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ð¹ Ñ†ÐµÐ½Ñ‹
- `calculate_statistics(symbol)`: Ð Ð°ÑÑ‡ÐµÑ‚ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ (ÑÑ€ÐµÐ´Ð½ÐµÐµ, Ð¼ÐµÐ´Ð¸Ð°Ð½Ð°, std)
- `identify_patterns_before_movements(symbol, days_before=5)`: ÐÐ½Ð°Ð»Ð¸Ð· Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ð¾Ð²
- `get_recent_data(symbol, days=30)`: ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸**:
- ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Yahoo Finance Ð¸ MOEX
- ÐšÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² `self.stock_data`
- ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¼Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸ÑÐ¼Ð¸

---

### 2. Telegram Parser (`modules/telegram_parser.py`)
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: ÐÐ°Ð´Ñ‘Ð¶Ð½Ñ‹Ð¹ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ð²ÐµÐ¹ÐµÑ€ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Telegram-ÐºÐ°Ð½Ð°Ð»Ð¾Ð² Ñ Ð¸Ð½ÐºÑ€ÐµÐ¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸ÑÐ¼Ð¸.

#### ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
- `initialize_client(api_id, api_hash, phone)` â€” Ð½Ð°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÑ‚ Telethon user-ÑÐµÑÑÐ¸ÑŽ Ð² `data/telegram/stock_forecasting_session.session`.
- `fetch_channel_messages(client, channel, since_id, since_days)` â€” Ð´Ð¾Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ Ð½Ð¾Ð²Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ, Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·ÑƒÐµÑ‚ Ð´Ð°Ñ‚Ñƒ Ð² UTC Ð¸ Ð¸Ð·Ð²Ð»ÐµÐºÐ°ÐµÑ‚ ÑÑÑ‹Ð»ÐºÐ¸/Ñ‚Ð¸ÐºÐµÑ€Ñ‹/Ñ…ÑÑˆÑ‚ÐµÐ³Ð¸.
- `parse_channels(channel_cfgs, stock_symbols, days_back, ...)` â€” Ð¿Ð°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ð¾ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ ÐºÐ°Ð½Ð°Ð»Ñ‹, Ð²Ñ‹Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ `FloodWait`, Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ watermark `data/telegram/state.json` Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹.
- `filter_messages(df, stock_symbols, keywords)` â€” ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¿Ð¾ Ñ‚Ð¸ÐºÐµÑ€Ð°Ð¼ Ð¸ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ð¼ ÑÐ»Ð¾Ð²Ð°Ð¼.
- `run_telegram_parser(...)` â€” ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð°Ñ Ð¾Ð±Ð¾Ð»Ð¾Ñ‡ÐºÐ° Ð´Ð»Ñ Streamlit/CLI, Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÑŽÑ‰Ð°Ñ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ `pandas.DataFrame`.

#### ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸
- Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸ ÐºÐ°Ð½Ð°Ð»Ð°Ð¼Ð¸; Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Telethon Ð¿Ð¾Ð´ user-Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚.
- Ð˜Ð½ÐºÑ€ÐµÐ¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¸ Ð´ÐµÐ´ÑƒÐ¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð¿Ð¾ `msg_hash` (sha256).
- ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ ÑÑ‹Ñ€Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² `data/telegram/raw/{YYYY-MM-DD}.parquet` Ð¸ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚Ð° `data/telegram/latest.parquet`.
- ÐœÑÐ³ÐºÐ¾Ðµ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ `FloodWaitError`, `UsernameInvalidError`, `ChannelPrivateError`.
- ÐÐ°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÐ¼Ð°Ñ ÐºÐ¾Ð½ÐºÑƒÑ€Ñ€ÐµÐ½Ñ‚Ð½Ð¾ÑÑ‚ÑŒ (`max_concurrency`) Ð¸ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð¿Ð¾ allow-Ð»Ð¸ÑÑ‚Ñƒ Ñ‚Ð¸ÐºÐµÑ€Ð¾Ð² Ð¸ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ð¼ ÑÐ»Ð¾Ð²Ð°Ð¼.

#### Ð¡Ð¾Ð¿ÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ð¼Ð¾Ð´ÑƒÐ»Ð¸
- `modules/schemas.py` â€” Pydantic-Ð¼Ð¾Ð´ÐµÐ»Ð¸ `ChannelConfig`, `TelegramMessage` Ð´Ð»Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¾Ð² Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ….
- `modules/storage.py` â€” Ð¾Ð±Ñ‘Ñ€Ñ‚ÐºÐ¸ `save_parquet`/`load_parquet` Ñ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸ÐµÐ¹ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹.

---

### 3. LLMAnalyzer (`modules/llm_analyzer.py`)
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: ÐÐ½Ð°Ð»Ð¸Ð· Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ð¹ Ñ‡ÐµÑ€ÐµÐ· LLM

#### ÐšÐ»Ð°ÑÑ: `LLMAnalyzer`

**ÐœÐµÑ‚Ð¾Ð´Ñ‹**:
- `__init__(api_key, base_url, model_name)`:
  - ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ñ… OpenAI-ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ñ‹Ñ… endpoints
  - ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð¼Ð¾Ð´ÐµÐ»ÑŒ "gpt-5"
- `analyze_news_sentiment(text, stock_symbol=None)`:
  - ÐÐ½Ð°Ð»Ð¸Ð· Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÐºÑÑ‚Ð°
  - Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ JSON Ñ sentiment, confidence, stock_impact
- `analyze_batch_messages(messages_df, stock_symbols)`:
  - ÐŸÐ°ÐºÐµÑ‚Ð½Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð· Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹
  - Progress bar Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ
- `correlate_news_with_stock_movements(news_df, stock_data, symbol)`:
  - ÐšÐ¾Ñ€Ñ€ÐµÐ»ÑÑ†Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ð¹ Ñ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸ÐµÐ¼ Ñ†ÐµÐ½
  - Ð Ð°ÑÑ‡ÐµÑ‚ Ð»Ð°Ð³Ð¾Ð²Ñ‹Ñ… ÐºÐ¾Ñ€Ñ€ÐµÐ»ÑÑ†Ð¸Ð¹ (Ð´Ð¾ 7 Ð´Ð½ÐµÐ¹)
- `generate_forecast_analysis(historical_patterns, news_sentiment, symbol)`:
  - Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·Ð° Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
  - Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ JSON Ð¾Ñ‚Ð²ÐµÑ‚

**Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ð° LLM**:
```json
{
  "sentiment": "positive|negative|neutral",
  "confidence": 0.0-1.0,
  "stock_impact": "bullish|bearish|neutral",
  "impact_strength": 1-10,
  "key_factors": ["factor1", "factor2"],
  "summary": "ÐºÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð±ÑŠÑÑÐ½ÐµÐ½Ð¸Ðµ"
}
```

---

### 4. StockForecaster (`modules/forecaster.py`)
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: ML Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ RandomForest

#### ÐšÐ»Ð°ÑÑ: `StockForecaster`

**ÐœÐµÑ‚Ð¾Ð´Ñ‹**:
- `__init__()`: Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð¸ scaler
- `prepare_features(stock_data, sentiment_data=None)`:
  - Ð˜Ð½Ð¶ÐµÐ½ÐµÑ€Ð¸Ð½Ð³ Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ¾Ð² (SMA, RSI, volatility)
  - Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ sentiment Ð´Ð°Ð½Ð½Ñ‹Ñ… ÐµÑÐ»Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹
- `calculate_rsi(prices, window=14)`: Ð Ð°ÑÑ‡ÐµÑ‚ RSI Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ð°
- `aggregate_daily_sentiment(sentiment_data)`:
  - ÐÐ³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ sentiment Ð¿Ð¾ Ð´Ð½ÑÐ¼
  - Ð Ð°ÑÑ‡ÐµÑ‚ ÑÑ€ÐµÐ´Ð½Ð¸Ñ… Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ Ð¸ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð°
- `merge_sentiment_data(stock_data, sentiment_data)`:
  - ÐžÐ±ÑŠÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ðµ Ð±Ð¸Ñ€Ð¶ÐµÐ²Ñ‹Ñ… Ð¸ sentiment Ð´Ð°Ð½Ð½Ñ‹Ñ…
  - Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð»Ð°Ð³Ð¾Ð²Ñ‹Ñ… Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ¾Ð²
- `train_model(prepared_data)`:
  - ÐžÐ±ÑƒÑ‡ÐµÐ½Ð¸Ðµ RandomForestRegressor
  - 80/20 train/test split
  - Ð Ð°ÑÑ‡ÐµÑ‚ Ð¼ÐµÑ‚Ñ€Ð¸Ðº (MSE, RÂ²)
- `generate_forecast(recent_data, days_ahead=90)`:
  - Ð˜Ñ‚ÐµÑ€Ð°Ñ‚Ð¸Ð²Ð½Ð¾Ðµ Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
  - Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ confidence bands
- `get_feature_importance()`: Ð’Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ¾Ð² Ð¼Ð¾Ð´ÐµÐ»Ð¸

**ÐŸÑ€Ð¸Ð·Ð½Ð°ÐºÐ¸ Ð¼Ð¾Ð´ÐµÐ»Ð¸**:
- Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñ‹: SMA_5, SMA_20, RSI
- Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ñ†ÐµÐ½: 1Ð´, 5Ð´, 20Ð´
- ÐžÐ±ÑŠÐµÐ¼Ñ‹: Volume_SMA_5, Volume_Ratio
- Ð’Ð¾Ð»Ð°Ñ‚Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ: 5Ð´, 20Ð´
- High-Low spread
- Sentiment Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ (ÐµÑÐ»Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹)

---

### 5. Visualizer (`modules/visualizer.py`)
**ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°Ñ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…

#### ÐšÐ»Ð°ÑÑ: `Visualizer`

**ÐœÐµÑ‚Ð¾Ð´Ñ‹**:
- `__init__()`: Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð¾Ð¹ Ð¿Ð°Ð»Ð¸Ñ‚Ñ€Ñ‹
- `plot_stock_price_history(stock_data, symbol)`:
  - Ð“Ñ€Ð°Ñ„Ð¸Ðº Ñ†ÐµÐ½Ñ‹ Ð¸ Ð¾Ð±ÑŠÐµÐ¼Ð° (2 Ð¿Ð¾Ð´Ð³Ñ€Ð°Ñ„Ð¸ÐºÐ°)
- `plot_price_distribution(stock_data, symbol)`:
  - Ð“Ð¸ÑÑ‚Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð¸ box plot Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ
- `plot_top_movements(top_rises, top_falls, symbol)`:
  - Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‚Ð¾Ð¿ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ð¹ Ñ†ÐµÐ½Ñ‹
- `plot_sentiment_analysis(sentiment_df)`:
  - Pie chart Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ð¹
  - Timeline Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ð¹
  - Heatmap ÑÐ¸Ð»Ñ‹ Ð²Ð¾Ð·Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ
- `plot_correlation_analysis(correlation_df)`:
  - ÐšÐ¾Ñ€Ñ€ÐµÐ»ÑÑ†Ð¸Ð¾Ð½Ð½Ð°Ñ Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ð°
  - Ð“Ñ€Ð°Ñ„Ð¸Ðº Ð»Ð°Ð³Ð¾Ð²Ñ‹Ñ… ÐºÐ¾Ñ€Ñ€ÐµÐ»ÑÑ†Ð¸Ð¹
- `plot_forecast(historical_data, forecast_data, symbol)`:
  - Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ + Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·
  - Confidence bands
- `display_statistics_table(stats_dict, symbol)`:
  - Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð² Streamlit

**Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°**: Plotly Ð´Ð»Ñ Ð²ÑÐµÑ… Ð³Ñ€Ð°Ñ„Ð¸ÐºÐ¾Ð²
**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸**:
- Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð³Ñ€Ð°Ñ„Ð¸ÐºÐ¸
- ÐÐ´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ð°Ñ ÐºÐ¾Ð¼Ð¿Ð¾Ð½Ð¾Ð²ÐºÐ°
- ÐšÐ°ÑÑ‚Ð¾Ð¼Ð½Ð°Ñ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð°Ñ ÑÑ…ÐµÐ¼Ð°

---

## ðŸ”„ ÐŸÐ¾Ñ‚Ð¾Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ

### 1. Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ (`app.py`)
```python
1. ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Streamlit ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹
2. Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ session_state Ñ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ñ‹Ð¼Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÑÐ¼Ð¸
3. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ sidebar Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ð¼Ð¸
4. Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² (StockAnalyzer, LLMAnalyzer, etc.)
```

### 2. Ð’ÐºÐ»Ð°Ð´ÐºÐ¸ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ°

#### Ð’ÐºÐ»Ð°Ð´ÐºÐ° "ÐÐ½Ð°Ð»Ð¸Ð· Ð°ÐºÑ†Ð¸Ð¹":
```python
1. fetch_stock_data() Ð´Ð»Ñ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
2. calculate_price_changes() Ð¸ calculate_statistics()
3. find_top_movements() Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð°ÐºÑ†Ð¸Ð¸
4. Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Visualizer Ð¼ÐµÑ‚Ð¾Ð´Ñ‹
```

#### Ð’ÐºÐ»Ð°Ð´ÐºÐ° "ÐÐ°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹":
```python
1. run_telegram_parser() Ñ API credentials
2. filter_stock_related_messages()
3. analyze_batch_messages() Ñ‡ÐµÑ€ÐµÐ· LLM
4. ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² Ð°Ð½Ð°Ð»Ð¸Ð·Ð°
```

#### Ð’ÐºÐ»Ð°Ð´ÐºÐ° "ÐšÐ¾Ñ€Ñ€ÐµÐ»ÑÑ†Ð¸Ñ":
```python
1. Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° sentiment Ð¸ stock Ð´Ð°Ð½Ð½Ñ‹Ñ…
2. correlate_news_with_stock_movements()
3. Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÐºÐ¾Ñ€Ñ€ÐµÐ»ÑÑ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†
4. Ð Ð°ÑÑ‡ÐµÑ‚ Ð»Ð°Ð³Ð¾Ð²Ñ‹Ñ… ÑÑ„Ñ„ÐµÐºÑ‚Ð¾Ð²
```

#### Ð’ÐºÐ»Ð°Ð´ÐºÐ° "ÐŸÑ€Ð¾Ð³Ð½Ð¾Ð·":
```python
1. prepare_features() Ñ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸
2. train_model() Ð½Ð° Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ°Ñ…
3. generate_forecast() Ð½Ð° 90 Ð´Ð½ÐµÐ¹ Ð²Ð¿ÐµÑ€ÐµÐ´
4. Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·Ð° Ñ confidence bands
```

#### Ð’ÐºÐ»Ð°Ð´ÐºÐ° "ÐžÑ‚Ñ‡ÐµÑ‚":
```python
1. ÐÐ³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· Ð²ÑÐµÑ… Ð²ÐºÐ»Ð°Ð´Ð¾Ðº
2. Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÑÐ²Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð°
3. Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð² JSON Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚
4. ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ñ… Ð¼ÐµÑ‚Ñ€Ð¸Ðº
```

---

## âš™ï¸ ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°

### ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
```bash
# OpenAI/LLM Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
OPENAI_API_KEY=your_api_key
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL_NAME=gpt-5

# Telegram Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash
TELEGRAM_PHONE=your_phone
```

### ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· UI (sidebar)
- **Ð¡Ð¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð°ÐºÑ†Ð¸Ð¹**: Multiselect + custom input
- **Telegram ÐºÐ°Ð½Ð°Ð»Ñ‹**: Ð¢ÐµÐºÑÑ‚Ð¾Ð²Ð¾Ðµ Ð¿Ð¾Ð»Ðµ (Ð¿Ð¾ Ð¾Ð´Ð½Ð¾Ð¼Ñƒ Ð½Ð° ÑÑ‚Ñ€Ð¾ÐºÑƒ)
- **ÐŸÐµÑ€Ð¸Ð¾Ð´ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°**: 1y, 2y, 5y
- **Ð”Ð½Ð¸ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹**: Slider 1-30 Ð´Ð½ÐµÐ¹
- **API Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸**: Ð”Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· session_state

### Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ (`pyproject.toml`)
```toml
[project]
name = "repl-nix-workspace"
version = "0.1.0"
requires-python = ">=3.11"
dependencies = [
    "numpy>=2.3.3",
    "openai>=1.109.1",
    "pandas>=2.3.2",
    "pydantic>=2.0.0",
    "pyyaml>=6.0.2",
    "pytest>=8.3.4",
    "pytest-asyncio>=0.25.2",
    "plotly>=6.3.0",
    "scikit-learn>=1.7.2",
    "scipy>=1.16.2",
    "streamlit>=1.50.0",
    "telethon>=1.41.2",
    "yfinance>=0.2.66",
]
```

---

## ðŸŒ API Ð¸ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸

### 1. Yahoo Finance API
- **Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°**: yfinance
- **Endpoint**: ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ‡ÐµÑ€ÐµÐ· Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÑƒ
- **Ð”Ð°Ð½Ð½Ñ‹Ðµ**: OHLCV, Ð´Ð¸Ð²Ð¸Ð´ÐµÐ½Ð´Ñ‹, ÑÐ¿Ð»Ð¸Ñ‚Ñ‹
- **ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ**: ÐÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ñ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¸Ðµ Ð°ÐºÑ†Ð¸Ð¸ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹

### 2. MOEX ISS API
- **Endpoint**: `https://iss.moex.com/iss/engines/stock/markets/shares/boards/{board}/securities/{symbol}/candles.json`
- **Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚**: JSON
- **ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸**:
  - ÐŸÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ API Ð±ÐµÐ· Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸
  - ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ð¸
  - Ð˜Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ñ‹: 1, 10, 60, 24 (Ñ‡Ð°ÑÑ‹)

### 3. Telegram API
- **Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°**: Telethon
- **ÐÐ²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ**: API ID + Hash + Phone
- **Ð¡ÐµÑÑÐ¸Ñ**: Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ÑÑ Ð² `stock_forecasting_session`
- **Rate limits**: Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ðµ Telegram Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ

### 4. OpenAI API
- **Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°**: openai
- **ÐœÐ¾Ð´ÐµÐ»ÑŒ**: gpt-5 (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ)
- **ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸**:
  - ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ñ… endpoints
  - JSON mode Ð´Ð»Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²
  - Ð¢ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ð°: 0.3 Ð´Ð»Ñ ÐºÐ¾Ð½ÑÐ¸ÑÑ‚ÐµÐ½Ñ‚Ð½Ð¾ÑÑ‚Ð¸

---

## ðŸ’» Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÑ‚ÐµÐº

### Backend
- **Python 3.11+**: ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÑÐ·Ñ‹Ðº
- **Pandas**: ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…
- **NumPy**: Ð§Ð¸ÑÐ»ÐµÐ½Ð½Ñ‹Ðµ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ
- **Scikit-learn**: Machine Learning
- **SciPy**: Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð·

### Frontend
- **Streamlit**: Web Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ
- **Plotly**: Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°Ñ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ

### API ÐºÐ»Ð¸ÐµÐ½Ñ‚Ñ‹
- **yfinance**: Yahoo Finance Ð´Ð°Ð½Ð½Ñ‹Ðµ
- **Telethon**: Telegram API
- **OpenAI**: LLM Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ

### Ð˜Ð½Ñ„Ñ€Ð°ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°
- **UV**: Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑÐ¼Ð¸
- **Virtualenv**: Ð˜Ð·Ð¾Ð»ÑÑ†Ð¸Ñ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

---

## ðŸ“¨ Telegram-ÐºÐ¾Ð½Ð²ÐµÐ¹ÐµÑ€: Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¸ Ð·Ð°Ð¿ÑƒÑÐº

1. **ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Telegram API ID/Hash**: Ð½Ð° [my.telegram.org/apps](https://my.telegram.org/apps) ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ `api_id`, `api_hash` Ð¸ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð°.
2. **ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¸**:
   - `config/channels.yml` â€” ÑÐ¿Ð¸ÑÐ¾Ðº Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… `username` Ð¸ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ð¹ ÐºÐ°Ð½Ð°Ð»Ð¾Ð²; Ð¿Ð¾Ð»Ðµ `enabled` ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð¾Ð¼.
   - `config/keywords.yml` (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾) â€” ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÑÐ»Ð¾Ð²Ð°/Ñ€ÐµÐ³ÑƒÐ»ÑÑ€ÐºÐ¸ Ð´Ð»Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ð¾Ð¹ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ð¸.
3. **ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº** ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ user-ÑÐµÑÑÐ¸ÑŽ Ð² `data/telegram/stock_forecasting_session.session`. ÐŸÑ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð²Ñ…Ð¾Ð´Ðµ Telethon Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ ÐºÐ¾Ð´ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸.
4. **CLI**: 
   ```bash
   python -m modules.telegram_parser \
     --channels config/channels.yml \
     --days-back 7 \
     --symbols SBER,GAZP,AAPL \
     --api-id $TELEGRAM_API_ID \
     --api-hash $TELEGRAM_API_HASH \
     --phone $TELEGRAM_PHONE
   ```
5. **Ð˜Ð½ÐºÑ€ÐµÐ¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ**:
   - `data/telegram/state.json` â€” watermark `message_id` Ð¿Ð¾ ÐºÐ°Ð½Ð°Ð»Ð°Ð¼.
   - `data/telegram/raw/{YYYY-MM-DD}.parquet` + `data/telegram/latest.parquet` â€” ÑÑ‹Ñ€Ñ‹Ðµ Ð¸ Ð°Ð³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ñ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ°Ð¼Ð¸ `date_utc`, `channel_username`, `tickers`, `links`, `msg_hash`.
6. **Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ð² Streamlit**: Ð²ÐºÐ»Ð°Ð´ÐºÐ° Â«ÐÐ°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹Â» Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ `run_telegram_parser(...)` Ð¸ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÐµÑ‚ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ, ÑÐ²Ð¾Ð´ÐºÑƒ Ð¸ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð² LLM-ÐºÐ¾Ð½Ð²ÐµÐ¹ÐµÑ€.

---

## ðŸš€ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð¿Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÑƒ

### 1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
python -m venv .venv

# ÐÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
source .venv/bin/activate  # Linux/Mac
# Ð¸Ð»Ð¸
.venv\Scripts\activate  # Windows

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
pip install -r requirements.txt
# Ð¸Ð»Ð¸ Ñ‡ÐµÑ€ÐµÐ· uv
uv pip install -r pyproject.toml
```

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env Ñ„Ð°Ð¹Ð»
cat > .env << EOF
OPENAI_API_KEY=your_key
TELEGRAM_API_ID=your_id
TELEGRAM_API_HASH=your_hash
TELEGRAM_PHONE=your_phone
EOF

# Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ…
export $(cat .env | xargs)
```

### 3. Ð—Ð°Ð¿ÑƒÑÐº Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
```bash
# Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº
streamlit run app.py

# Ð¡ ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ð¼ Ð¿Ð¾Ñ€Ñ‚Ð¾Ð¼
streamlit run app.py --server.port 8501

# Headless Ñ€ÐµÐ¶Ð¸Ð¼ (Ð´Ð»Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°)
streamlit run app.py --server.headless true
```

### 4. ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº
1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ http://localhost:8501
2. Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ API ÐºÐ»ÑŽÑ‡Ð¸ Ð² sidebar
3. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°
4. ÐŸÑ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ð¸ Telegram Ð¿Ð¾Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ

---

## âš ï¸ Ð˜Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ

### Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ
1. **RandomForest Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·**: Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð°Ñ Ñ€ÐµÐºÑƒÑ€ÑÐ¸Ð²Ð½Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ, Ð¼Ð¾Ð¶ÐµÑ‚ Ð´Ñ€ÐµÐ¹Ñ„Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° Ð´Ð»Ð¸Ð½Ð½Ñ‹Ñ… Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ñ…
2. **MOEX API**: ÐÐµÑ‚ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹ Ð¾Ñ‚ rate limiting, Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹ ÑÐ±Ð¾Ð¸ Ð¿Ñ€Ð¸ Ñ‡Ð°ÑÑ‚Ñ‹Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°Ñ…
3. **Telegram Ð¿Ð°Ñ€ÑÐµÑ€**: Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½ÑƒÑŽ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸ÑŽ, Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ 2FA Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸
4. **Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ ÑÐµÑÑÐ¸Ð¸**: Ð’ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÐ±Ñ€Ð°ÑÑ‹Ð²Ð°ÑŽÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐµ Streamlit

### Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ
1. **ÐÐµÑ‚ Ð¿ÐµÑ€ÑÐ¸ÑÑ‚ÐµÐ½Ñ‚Ð½Ð¾ÑÑ‚Ð¸**: Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ð¼ÐµÐ¶Ð´Ñƒ ÑÐµÑÑÐ¸ÑÐ¼Ð¸
2. **LLM ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ**: ÐŸÑ€ÐµÐ´Ð¿Ð¾Ð»Ð°Ð³Ð°ÐµÑ‚ÑÑ JSON Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ð°, Ð½ÐµÑ‚ retry Ð»Ð¾Ð³Ð¸ÐºÐ¸
3. **ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº**: Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°, Ð¼Ð¾Ð¶ÐµÑ‚ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ñ‚ÑŒ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ
4. **ÐœÐ°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€ÑƒÐµÐ¼Ð¾ÑÑ‚ÑŒ**: ÐžÐ´Ð½Ð¾Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ð¾Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ, Ð½Ðµ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ Ð´Ð»Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ñ… Ð¾Ð±ÑŠÐµÐ¼Ð¾Ð²

### ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…
1. **Yahoo Finance**: Ð Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¸Ðµ Ð°ÐºÑ†Ð¸Ð¸ Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹ Ð¸Ð·-Ð·Ð° ÑÐ°Ð½ÐºÑ†Ð¸Ð¹
2. **MOEX**: Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ, Ð·Ð°Ð´ÐµÑ€Ð¶ÐºÐ° 15 Ð¼Ð¸Ð½ÑƒÑ‚
3. **Telegram**: ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð½Ð° ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð¸ ÐºÐ°Ð½Ð°Ð»Ð¾Ð²
4. **LLM**: Ð—Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð¸ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚Ð¾Ð²

---

## ðŸ“Š ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸

### Ð¢Ð¸Ð¿Ð¸Ñ‡Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ
- Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð°ÐºÑ†Ð¸Ð¹: 2-5 ÑÐµÐº Ð½Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»
- ÐŸÐ°Ñ€ÑÐ¸Ð½Ð³ Telegram: 5-10 ÑÐµÐº Ð½Ð° ÐºÐ°Ð½Ð°Ð»
- LLM Ð°Ð½Ð°Ð»Ð¸Ð·: 1-2 ÑÐµÐº Ð½Ð° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ
- ÐžÐ±ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸: 5-15 ÑÐµÐº
- Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·Ð°: 2-5 ÑÐµÐº

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ðº Ñ€ÐµÑÑƒÑ€ÑÐ°Ð¼
- RAM: ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 2GB, Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð¾Ð²Ð°Ð½Ð¾ 4GB
- CPU: 2+ ÑÐ´Ñ€Ð° Ð´Ð»Ñ ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹
- Ð”Ð¸ÑÐº: 500MB Ð´Ð»Ñ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
- Ð¡ÐµÑ‚ÑŒ: Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ðµ

---

## ðŸ” ÐžÑ‚Ð»Ð°Ð´ÐºÐ° Ð¸ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

### Ð’ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ debug Ñ€ÐµÐ¶Ð¸Ð¼Ð°
```python
# Ð’ app.py
import streamlit as st
st.set_option('deprecation.showPyplotGlobalUse', False)
st.set_option('logger.level', 'debug')
```

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸ÑÐ°
```bash
python -m compileall app.py modules
```

### Ð¢Ð¸Ð¿Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ
1. **"API key not found"**: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
2. **"No data for symbol"**: ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¼ÐµÐ¶Ð´ÑƒÐ½Ð°Ñ€Ð¾Ð´Ð½Ñ‹Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹
3. **"Telegram auth failed"**: Ð£Ð´Ð°Ð»Ð¸Ñ‚Ðµ session Ñ„Ð°Ð¹Ð» Ð¸ Ð¿ÐµÑ€ÐµÐ°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·ÑƒÐ¹Ñ‚ÐµÑÑŒ
4. **"Model training failed"**: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ Ð´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…

---

## ðŸ“ TODO Ð¸ Ð¿Ð»Ð°Ð½Ñ‹ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ñ

### ÐšÑ€Ð°Ñ‚ÐºÐ¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ
- [ ] Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ unit Ñ‚ÐµÑÑ‚Ñ‹
- [ ] Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ retry Ð»Ð¾Ð³Ð¸ÐºÑƒ Ð´Ð»Ñ API
- [ ] Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
- [ ] Ð£Ð»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ð¾ÑˆÐ¸Ð±Ð¾Ðº

### Ð”Ð¾Ð»Ð³Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ð»Ð°Ð½Ñ‹
- [ ] ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ñ Ð½Ð° async Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñƒ
- [ ] Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ñ€ÑƒÐ³Ð¸Ñ… ML Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ (LSTM, XGBoost)
- [ ] Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ backtesting
- [ ] Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ real-time Ð´Ð°Ð½Ð½Ñ‹Ñ…
- [ ] Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Ð±Ñ€Ð¾ÐºÐµÑ€ÑÐºÐ¸Ð¼Ð¸ API
- [ ] ÐœÐ¾Ð±Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ

---

## ðŸ“„ Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ Ð¸ Ð°Ð²Ñ‚Ð¾Ñ€Ñ‹

**Ð¢Ð¸Ð¿ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°**: Ð£Ñ‡ÐµÐ±Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚
**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ**: Ð’ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ð¹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ
**ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÐµÐµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ**: 2025-09-29

---

*Ð­Ñ‚Ð¾Ñ‚ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸ÑÑ… Ð² ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°*
